<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amerikan Damasƒ± - Online Multiplayer</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Socket.io CDN -->
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        
        /* Professional Animations */
        @keyframes pulse-glow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(239, 68, 68, 0.5), 
                           0 0 40px rgba(239, 68, 68, 0.3),
                           0 0 60px rgba(239, 68, 68, 0.1);
            }
            50% { 
                box-shadow: 0 0 30px rgba(239, 68, 68, 0.8), 
                           0 0 60px rgba(239, 68, 68, 0.5),
                           0 0 80px rgba(239, 68, 68, 0.3);
            }
        }
        
        @keyframes float-animation {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes slide-in {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        @keyframes piece-glow {
            0%, 100% { 
                box-shadow: 0 0 15px rgba(255, 215, 0, 0.8),
                           0 0 30px rgba(255, 215, 0, 0.5);
            }
            50% { 
                box-shadow: 0 0 25px rgba(255, 215, 0, 1),
                           0 0 50px rgba(255, 215, 0, 0.7);
            }
        }
        
        @keyframes valid-move-pulse {
            0%, 100% { 
                background-color: rgba(34, 197, 94, 0.3);
                box-shadow: inset 0 0 20px rgba(34, 197, 94, 0.6);
            }
            50% { 
                background-color: rgba(34, 197, 94, 0.5);
                box-shadow: inset 0 0 30px rgba(34, 197, 94, 0.8);
            }
        }
        
        .animate-pulse-glow { animation: pulse-glow 2s infinite ease-in-out; }
        .animate-float { animation: float-animation 3s infinite ease-in-out; }
        .animate-slide-in { animation: slide-in 0.5s ease-out; }
        .animate-piece-glow { animation: piece-glow 1.5s infinite ease-in-out; }
        .animate-valid-move { animation: valid-move-pulse 1s infinite ease-in-out; }
        
        .title-glow { 
            text-shadow: 0 0 20px #ef4444, 
                        0 0 40px #ef4444, 
                        0 0 60px #ef4444;
        }
        
        .button-red {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .button-red:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.4);
        }
        
        .button-red::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .button-red:hover::before {
            left: 100%;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(8, 1fr);
            width: min(95vw, 95vh);
            height: min(95vw, 95vh);
            max-width: 600px;
            max-height: 600px;
            border: 8px solid #1e293b;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            overflow: hidden;
            touch-action: manipulation;
            margin: 0 auto;
            background: linear-gradient(45deg, #f3f4f6, #e5e7eb);
            aspect-ratio: 1;
        }
        
        .cell {
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        .cell-black { 
            background: linear-gradient(135deg, #374151, #1f2937);
        }
        
        .cell-white { 
            background: linear-gradient(135deg, #f9fafb, #f3f4f6);
        }
        
        .cell:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        
        .piece {
            width: 85%;
            height: 85%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(1rem, 4vw, 2rem);
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            border: 2px solid;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .piece-white { 
            background: linear-gradient(145deg, #ffffff, #f3f4f6); 
            color: #1f2937; 
            border-color: #d1d5db;
        }
        
        .piece-black { 
            background: linear-gradient(145deg, #1f2937, #111827); 
            color: #ffffff; 
            border-color: #4b5563;
        }
        
        .piece-king { 
            animation: piece-glow 2s infinite ease-in-out;
        }
        
        .piece-king-white { 
            background: linear-gradient(145deg, #fef3c7, #fbbf24); 
            border-color: #f59e0b;
            color: #78350f;
        }
        
        .piece-king-black { 
            background: linear-gradient(145deg, #4b5563, #374151); 
            border-color: #fbbf24;
            color: #fbbf24;
        }
        
        .piece.selected {
            animation: piece-glow 1s infinite ease-in-out;
            transform: scale(1.1);
        }
        
        .valid-move {
            background-color: rgba(34, 197, 94, 0.4) !important;
            box-shadow: inset 0 0 20px rgba(34, 197, 94, 0.8);
            animation: valid-move-pulse 1s infinite ease-in-out;
        }
        
        .current-turn-piece {
            animation: piece-glow 2s infinite ease-in-out;
        }
        
        .mandatory-capture-piece {
            animation: mandatory-capture-pulse 1s infinite ease-in-out;
            border: 3px solid #ef4444 !important;
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.8);
        }
        
        .continue-jump-piece {
            animation: continue-jump-pulse 0.8s infinite ease-in-out;
            border: 3px solid #3b82f6 !important;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
        }
        
        .capture-move {
            background-color: rgba(239, 68, 68, 0.4) !important;
            box-shadow: inset 0 0 25px rgba(239, 68, 68, 0.9);
            animation: capture-pulse 0.6s infinite ease-in-out;
        }
        
        @keyframes mandatory-capture-pulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 20px rgba(239, 68, 68, 0.8);
            }
            50% { 
                transform: scale(1.1);
                box-shadow: 0 0 30px rgba(239, 68, 68, 1);
            }
        }
        
        @keyframes continue-jump-pulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
            }
            50% { 
                transform: scale(1.1);
                box-shadow: 0 0 30px rgba(59, 130, 246, 1);
            }
        }
        
        @keyframes capture-pulse {
            0%, 100% { 
                background-color: rgba(239, 68, 68, 0.4);
            }
            50% { 
                background-color: rgba(239, 68, 68, 0.6);
            }
        }
        
        .last-move-from {
            background-color: rgba(251, 191, 36, 0.3) !important;
            box-shadow: inset 0 0 15px rgba(251, 191, 36, 0.6);
        }
        
        .last-move-to {
            background-color: rgba(251, 191, 36, 0.5) !important;
            box-shadow: inset 0 0 20px rgba(251, 191, 36, 0.8);
            animation: last-move-glow 1s ease-in-out;
        }
        
        @keyframes last-move-glow {
            0% { 
                background-color: rgba(251, 191, 36, 0.8);
                transform: scale(1.05);
            }
            100% { 
                background-color: rgba(251, 191, 36, 0.5);
                transform: scale(1);
            }
        }
    </style>
</head>

<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center justify-center p-2 font-inter overflow-x-hidden">

    <!-- Modal Mesaj Kutusu -->
    <div id="message-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
        <div class="bg-gray-800 text-white p-6 rounded-2xl shadow-2xl max-w-sm w-full transform transition-all duration-300 scale-100">
            <h3 class="text-xl font-bold mb-4 text-red-400">Bildiri≈ü</h3>
            <p id="modal-message" class="mb-6 text-gray-300"></p>
            <button id="modal-close-btn" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-xl transition-all duration-200 transform hover:scale-105">
                Baƒüla
            </button>
        </div>
    </div>

    <!-- Ba≈ülƒ±k ve Status -->
    <div class="mb-6 p-4 rounded-2xl bg-gray-800 shadow-2xl text-center animate-pulse-glow">
        <h1 class="text-2xl sm:text-4xl font-extrabold title-glow mb-2">
            AMERƒ∞KAN DAMASI
        </h1>
        <p id="connection-status" class="text-sm text-yellow-400 font-semibold transition-all duration-300">Server…ô qo≈üulur...</p>
    </div>

    <!-- Loading Ekranƒ± -->
    <div id="loader" class="text-center p-8 bg-gray-800 rounded-2xl shadow-xl max-w-sm w-full">
        <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-500 mx-auto mb-4"></div>
        <p class="text-lg font-semibold">Y√ºkl…ônir...</p>
    </div>

    <!-- Lobi Ekranƒ± -->
    <div id="lobby-screen" class="hidden w-full max-w-md bg-gray-800 p-6 rounded-2xl shadow-2xl border border-gray-700">
        <h2 class="text-2xl sm:text-3xl font-bold text-center mb-6 text-red-400 animate-float">Oyun Lobisi</h2>
        <p id="lobi-status-message" class="text-center text-yellow-300 mb-8 font-semibold transition-all duration-300 text-sm sm:text-base">
            Oyun rejimi se√ßin.
        </p>

        <div class="space-y-4">
            <!-- 1. Dereceli E≈üle≈üme -->
            <button id="dereceli-btn" class="w-full button-red text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-xl text-lg">
                üèÜ Dereceli Oyna
            </button>
            <button id="cancel-btn" class="hidden w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-xl">
                ‚ùå ƒ∞ptal Et
            </button>

            <!-- 2. Arkada≈üla Oyna -->
            <div class="bg-gray-700 p-5 rounded-xl shadow-inner space-y-4">
                <h3 class="text-xl font-bold text-blue-400">üë• Arkada≈üla Oyna</h3>
                <button id="friend-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg">
                    Oda Yarat
                </button>
                <div class="flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-2">
                    <span class="text-sm font-semibold text-gray-300">Oda Kodu:</span>
                    <span id="room-code-output" class="text-xl sm:text-2xl font-mono text-green-400 bg-gray-900 px-3 py-2 rounded-lg shadow-inner select-all flex-1 text-center">...</span>
                    <button id="copy-code-btn" class="bg-green-600 hover:bg-green-700 text-white text-sm py-2 px-4 rounded-lg transition-all duration-200 transform hover:scale-105">
                        üìã Kopyala
                    </button>
                </div>
            </div>

            <!-- 3. Koda Baƒülan -->
            <div class="bg-gray-700 p-5 rounded-xl shadow-inner space-y-3">
                <input id="join-room-input" type="text" placeholder="Oda Kodu (4 R…ôq…ôm)" maxlength="4" 
                    class="w-full p-3 rounded-lg border-2 border-gray-600 bg-gray-900 text-white placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500 text-center text-lg font-mono">
                <button id="join-room-btn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg">
                    üîó Odaya Baƒülan
                </button>
            </div>
        </div>
    </div>

    <!-- Oyun Ekranƒ± -->
    <div id="game-screen" class="hidden w-full flex flex-col items-center max-w-2xl">
        
        <!-- N√∂vb…ô G√∂st…ôricisi -->
        <div id="current-turn-display" class="w-full max-w-md mb-4 p-4 rounded-xl bg-gray-800 shadow-xl text-center">
            <p class="text-lg sm:text-xl font-bold">Sƒ±ra: <span id="turn-text" class="text-yellow-400">Y√ºkl…ônir...</span></p>
        </div>

        <!-- Dama Tahtasƒ± -->
        <div id="board" class="board mb-6">
            <!-- Ta≈ülar JavaScript ile √ßizilir -->
        </div>

        <!-- Oyundan √áƒ±k Butonu -->
        <button id="leave-game-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-xl">
            üö™ Oyundan √áƒ±x
        </button>

    </div>

    <!-- JavaScript Dosyalarƒ± -->
    <script src="game.js"></script>

</body>
</html>
